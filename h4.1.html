<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H4/1 - Analízis Modell</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #eef2ff; padding: 20px; color: #333; margin: 0; line-height: 1.6; }
        .card { background: white; max-width: 900px; margin: 0 auto; padding: 40px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); border-top: 6px solid #4f46e5; }
        h1 { color: #312e81; text-align: center; margin-bottom: 20px; }
        h2 { color: #4338ca; background: #e0e7ff; padding: 10px 15px; border-radius: 6px; margin-top: 40px; border-left: 5px solid #4f46e5; }
        p { text-align: justify; margin-bottom: 15px; }
        
        .svg-container { display: flex; justify-content: center; margin: 30px 0; background: #fff; padding: 20px; border: 1px solid #e0e7ff; border-radius: 8px; overflow-x: auto; }
        .box { fill: #eef2ff; stroke: #312e81; }
    </style>
</head>
<body>

<div class="card">
    <h1>1. Analízis Modell (OO Tervezés)</h1>
    <p>A tervezési fázis első lépéseként az SRS-ben definiált funkcionális követelményeket képeztük le konkrét szoftveres objektumokra. A cél az volt, hogy a valós világ entitásait (székek, jegyek, nézők) olyan osztálystruktúrába szervezzük, amely támogatja a modularitást és az újrafelhasználhatóságot.</p>

    <h2>Osztálydiagram (Domén modell)</h2>
    <p>Az alábbi diagram a rendszer statikus szerkezetét mutatja be. A központi elem a <strong>Seat</strong> (Szék) és a <strong>Booking</strong> (Foglalás) kapcsolata. Külön figyelmet érdemel a <strong>HeightValidator</strong> osztály, amely nem tárol adatot, hanem egy tiszta szolgáltatás (Service Class), felelőssége kizárólag az üzleti logika – a magasságok összehasonlítása – végrehajtása.</p>

    <div class="svg-container">
        <svg width="600" height="250" viewBox="0 0 600 250" xmlns="http://www.w3.org/2000/svg">
            <defs><marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><path d="M0,0 L0,6 L9,3 z" fill="#333" /></marker></defs>
            <rect x="20" y="20" width="120" height="80" fill="#eef2ff" stroke="#312e81" stroke-width="2"/>
            <text x="80" y="40" text-anchor="middle" font-weight="bold" font-family="sans-serif" font-size="14">Seat</text>
            <line x1="20" y1="50" x2="140" y2="50" stroke="#312e81"/>
            <text x="30" y="65" font-size="10" font-family="sans-serif">+row, col</text>
            <text x="30" y="80" font-size="10" font-family="sans-serif">+is_occupied</text>
            <rect x="220" y="20" width="140" height="90" fill="#eef2ff" stroke="#312e81" stroke-width="2"/>
            <text x="290" y="40" text-anchor="middle" font-weight="bold" font-family="sans-serif" font-size="14">Booking</text>
            <line x1="220" y1="50" x2="360" y2="50" stroke="#312e81"/>
            <text x="230" y="65" font-size="10" font-family="sans-serif">+id, price</text>
            <text x="230" y="80" font-size="10" font-family="sans-serif">+visitor_height</text>
            <rect x="440" y="20" width="120" height="60" fill="#eef2ff" stroke="#312e81" stroke-width="2"/>
            <text x="500" y="40" text-anchor="middle" font-weight="bold" font-family="sans-serif" font-size="14">User</text>
            <line x1="440" y1="50" x2="560" y2="50" stroke="#312e81"/>
            <rect x="220" y="160" width="140" height="60" fill="#fff" stroke="#312e81" stroke-width="2" stroke-dasharray="5,5"/>
            <text x="290" y="180" text-anchor="middle" font-weight="bold" font-family="sans-serif" font-size="14">HeightValidator</text>
            <line x1="220" y1="190" x2="360" y2="190" stroke="#312e81"/>
            <text x="230" y="205" font-size="10" font-family="sans-serif">+validate()</text>
            <line x1="140" y1="60" x2="220" y2="60" stroke="#333" stroke-width="1.5"/><text x="160" y="50" font-size="10">1</text><text x="200" y="50" font-size="10">0..1</text>
            <line x1="360" y1="60" x2="440" y2="60" stroke="#333" stroke-width="1.5"/><text x="380" y="50" font-size="10">*</text><text x="420" y="50" font-size="10">1</text>
            <line x1="290" y1="110" x2="290" y2="160" stroke="#333" stroke-width="1.5" stroke-dasharray="4,4" marker-end="url(#arrow)"/><text x="300" y="140" font-size="10" font-family="sans-serif">uses</text>
        </svg>
    </div>

    <h2>Dinamikus modellezés: Szekvencia Diagram</h2>
    <p>Ez a diagram a rendszer legkritikusabb folyamatát, a <strong>"Blokkolás-ellenőrzéssel egybekötött jegyválasztást"</strong> modellezi. Jól látható, hogy a felhasználói interakció (kattintás) elindít egy láncreakciót: a Controller nem dönt egyedül, hanem lekéri az adatokat az Adatbázisból (hogy ki ül az előző sorban), majd a HeightValidator döntése alapján küld vissza ZÖLD (engedélyezett) vagy PIROS (figyelmeztető) jelzést a GUI-nak.</p>

    <div class="svg-container">
        <svg width="600" height="350" viewBox="0 0 600 350" xmlns="http://www.w3.org/2000/svg">
            <style>.life { stroke: #999; stroke-dasharray: 5,5; } .msg { stroke: #333; stroke-width: 1.5; marker-end: url(#arrow); }</style>
            <defs><marker id="arrow2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><path d="M0,0 L0,6 L9,3 z" fill="#333"/></marker></defs>
            <rect x="20" y="10" width="80" height="30" class="box"/> <text x="60" y="30" text-anchor="middle" font-size="12">User</text>
            <rect x="150" y="10" width="80" height="30" class="box"/> <text x="190" y="30" text-anchor="middle" font-size="12">GUI</text>
            <rect x="280" y="10" width="80" height="30" class="box"/> <text x="320" y="30" text-anchor="middle" font-size="12">Controller</text>
            <rect x="410" y="10" width="80" height="30" class="box"/> <text x="450" y="30" text-anchor="middle" font-size="12">Database</text>
            <line x1="60" y1="40" x2="60" y2="300" class="life"/>
            <line x1="190" y1="40" x2="190" y2="300" class="life"/>
            <line x1="320" y1="40" x2="320" y2="300" class="life"/>
            <line x1="450" y1="40" x2="450" y2="300" class="life"/>
            <line x1="60" y1="70" x2="190" y2="70" class="msg" marker-end="url(#arrow2)"/><text x="125" y="65" text-anchor="middle" font-size="10">1. Szék kiválasztás</text>
            <line x1="190" y1="100" x2="320" y2="100" class="msg" marker-end="url(#arrow2)"/><text x="255" y="95" text-anchor="middle" font-size="10">2. check_seat(id)</text>
            <line x1="320" y1="130" x2="450" y2="130" class="msg" marker-end="url(#arrow2)"/><text x="385" y="125" text-anchor="middle" font-size="10">3. get_row_in_front()</text>
            <line x1="450" y1="160" x2="320" y2="160" class="msg" style="stroke-dasharray: 3,3;" marker-end="url(#arrow2)"/><text x="385" y="155" text-anchor="middle" font-size="10">4. adatok</text>
            <rect x="180" y="180" width="280" height="100" fill="none" stroke="#ccc" stroke-dasharray="5,5"/>
            <text x="210" y="195" font-size="10" font-weight="bold">[Blokkolás]</text>
            <line x1="320" y1="210" x2="190" y2="210" class="msg" marker-end="url(#arrow2)"/><text x="255" y="205" text-anchor="middle" font-size="10" fill="red">PIROS jelzés</text>
            <line x1="180" y1="230" x2="460" y2="230" stroke="#ccc" stroke-dasharray="5,5"/>
            <text x="210" y="245" font-size="10" font-weight="bold">[OK]</text>
            <line x1="320" y1="260" x2="190" y2="260" class="msg" marker-end="url(#arrow2)"/><text x="255" y="255" text-anchor="middle" font-size="10" fill="green">ZÖLD jelzés</text>
        </svg>
    </div>
</div>

</body>
</html>
